<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva tu Cita | Clínica Dental</title>
    
    <!-- CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Vanilla Calendar -->
    <link href="https://cdn.jsdelivr.net/npm/@uvarov.frontend/vanilla-calendar/build/vanilla-calendar.min.css" rel="stylesheet">
    <!-- Toastify -->
    <link href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" rel="stylesheet">

    <link rel="stylesheet" href="../css/reserva.css">
    <link rel="stylesheet" href="../css/cursor.css">
    
   
</head>
<body>


     <!-- Navbar -->
     <nav class="navbar navbar-expand-lg navbar-light fixed-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="https://th.bing.com/th/id/OIP.5z8L-c6VPSfaxywxoQx1wAHaHa?rs=1&pid=ImgDetMain" alt="Logo" class="rounded-circle">
                <span class="fs-4 fw-bold text-primary">Dra. Dental</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="servicios.html">Servicios</a>
                    </li>
                    <li class="nav-item ms-lg-3">
                        <a class="btn btn-primary" href="reserva.html">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Agendar Cita
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>


    <!-- Header Section -->
    <section class="hero-section py-5 bg-light">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6" data-aos="fade-right">
                    <h1 class="display-4 fw-bold mb-4">
                        Reserva tu Cita
                        <span class="text-primary">Online</span>
                    </h1>
                    <p class="lead mb-4">Agenda tu consulta de manera fácil y rápida. Selecciona el servicio, fecha y horario que mejor se adapte a ti.</p>
                    <div class="d-flex gap-3">
                        <a href="#booking-steps" class="btn btn-primary">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Comenzar Reserva
                        </a>
                        <a href="#" class="btn btn-outline-primary">
                            <i class="fas fa-phone me-2"></i>
                            Contactar
                        </a>
                    </div>
                </div>
                <div class="col-lg-6" data-aos="fade-left">
                    <img src="https://img.freepik.com/vector-premium/diseno-concepto-estomatologia-odontologia-simbolos-problemas-dentales-ilustracion-vectorial-isometrica_1284-67536.jpg?w=1380" 
                         alt="Reserva dental" 
                         class="img-fluid rounded-4 shadow-lg">
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section id="booking-steps" class="py-5">
        <div class="container">
            <!-- Progress Steps -->
            <div class="booking-steps mb-5">
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-text">Servicio</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-text">Especialista</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-text">Fecha y Hora</div>
                </div>
                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <div class="step-text">Datos Personales</div>
                </div>
            </div>

            <!-- Booking Form Container -->
            <div class="booking-form-container">
                <!-- Step 1: Service Selection -->
                <div class="booking-step active" id="step-1">
                    <div class="row mb-4">
                        <div class="col-12">
                            <h3 class="mb-4" data-aos="fade-up">Selecciona el Servicio</h3>
                        </div>
                        <!-- Servicio 1: Blanqueamiento -->
                        <div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="100">
                            <div class="service-card" data-service="blanqueamiento" data-price="150">
                                <div class="service-image">
                                    <img src="https://th.bing.com/th/id/OIP.IR1MuyyWJmaY9LHRQLoGPwHaE7?rs=1&pid=ImgDetMain" alt="Blanqueamiento Dental">
                                    <span class="service-price">$150</span>
                                </div>
                                <div class="service-content">
                                    <h5>Blanqueamiento Dental</h5>
                                    <p class="text-muted mb-2">Duración: 60 min</p>
                                    <small class="text-primary">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Incluye limpieza dental
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Servicio 2: Ortodoncia -->
                        <div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="200">
                            <div class="service-card" data-service="ortodoncia" data-price="200">
                                <div class="service-image">
                                    <img src="https://th.bing.com/th/id/R.ea3db15309caaa6041acc925711fbc35?rik=U5TWBxsUKxp1gg&pid=ImgRaw&r=0" alt="Ortodoncia">
                                    <span class="service-price">$200</span>
                                </div>
                                <div class="service-content">
                                    <h5>Ortodoncia</h5>
                                    <p class="text-muted mb-2">Duración: 45 min</p>
                                    <small class="text-primary">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Consulta y valoración
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Servicio 3: Implantes -->
                        <div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="300">
                            <div class="service-card" data-service="implantes" data-price="500">
                                <div class="service-image">
                                    <img src="https://th.bing.com/th/id/R.152dfd4ab41c2cfde17b0ad45f9b09b5?rik=4zr00cChARkVqQ&pid=ImgRaw&r=0" alt="Implantes Dentales">
                                    <span class="service-price">$500</span>
                                </div>
                                <div class="service-content">
                                    <h5>Implantes Dentales</h5>
                                    <p class="text-muted mb-2">Duración: 90 min</p>
                                    <small class="text-primary">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Incluye radiografía
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Servicio 4: Estética Dental -->
                        <div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="400">
                            <div class="service-card" data-service="estetica" data-price="300">
                                <div class="service-image">
                                    <img src="https://th.bing.com/th/id/R.80db3989928fe30b2e64e3c2998c30fb?rik=Lr79QEXN9gKBPg&pid=ImgRaw&r=0" alt="Estética Dental">
                                    <span class="service-price">$300</span>
                                </div>
                                <div class="service-content">
                                    <h5>Estética Dental</h5>
                                    <p class="text-muted mb-2">Duración: 60 min</p>
                                    <small class="text-primary">
                                        <i class="fas fa-info-circle me-1"></i>
                                        Diseño de sonrisa digital
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- Endodoncia -->
<div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="500">
    <div class="service-card" data-service="endodoncia" data-price="250">
        <div class="service-image">
            <img src="https://dentistas-cordoba.es/wp-content/uploads/2020/06/Endodoncia-3-scaled.jpg" alt="Endodoncia">
            <span class="service-price">$250</span>
        </div>
        <div class="service-content">
            <h5>Endodoncia</h5>
            <p class="text-muted mb-2">Duración: 90 min</p>
            <small class="text-primary">
                <i class="fas fa-info-circle me-1"></i>
                Incluye microscopía dental
            </small>
        </div>
    </div>
</div>

<!-- Odontopediatría -->
<div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="600">
    <div class="service-card" data-service="odontopediatria" data-price="80">
        <div class="service-image">
            <img src="https://th.bing.com/th/id/R.2ea99eab9fcbb0c4d2e4910e5e3637ab?rik=XptbtDGihiobWQ&riu=http%3a%2f%2fwww.gacetadental.com%2fwp-content%2fuploads%2f2015%2f04%2fILUSTRACION-2.jpg&ehk=99ztTm3iCfsrte1L5wGyNRiC3U%2fwDaAv%2fRS0MNXIW7o%3d&risl=&pid=ImgRaw&r=0" alt="Odontopediatría">
            <span class="service-price">$80</span>
        </div>
        <div class="service-content">
            <h5>Odontopediatría</h5>
            <p class="text-muted mb-2">Duración: 45 min</p>
            <small class="text-primary">
                <i class="fas fa-info-circle me-1"></i>
                Primera visita gratuita
            </small>
        </div>
    </div>
</div>

<!-- Periodoncia -->
<div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="700">
    <div class="service-card" data-service="periodoncia" data-price="180">
        <div class="service-image">
            <img src="https://th.bing.com/th/id/R.c87080f007cdb8c66b87a4f8c71a2ab8?rik=kwGgyeyDK2hhFw&riu=http%3a%2f%2fclinicadentalazama.com%2fwp-content%2fuploads%2f2019%2f09%2fodontologia-1024x436.jpg&ehk=gqKB%2fA%2b1oAINLu%2bPPTQSzIYF3DngXftA4%2f3uHRmIY4g%3d&risl=&pid=ImgRaw&r=0" alt="Periodoncia">
            <span class="service-price">$180</span>
        </div>
        <div class="service-content">
            <h5>Periodoncia</h5>
            <p class="text-muted mb-2">Duración: 60 min</p>
            <small class="text-primary">
                <i class="fas fa-info-circle me-1"></i>
                Incluye evaluación completa
            </small>
        </div>
    </div>
</div>

<!-- Prótesis Dentales -->
<div class="col-md-6 col-lg-3 mb-4" data-aos="fade-up" data-aos-delay="800">
    <div class="service-card" data-service="protesis" data-price="400">
        <div class="service-image">
            <img src="https://th.bing.com/th/id/R.359c8a586c24d3a10c46603f9da1315a?rik=GTjpK%2b31DrLUVg&pid=ImgRaw&r=0" alt="Prótesis Dentales">
            <span class="service-price">$400</span>
        </div>
        <div class="service-content">
            <h5>Prótesis Dentales</h5>
            <p class="text-muted mb-2">Duración: 120 min</p>
            <small class="text-primary">
                <i class="fas fa-info-circle me-1"></i>
                Ajuste personalizado incluido
            </small>
        </div>
    </div>
</div>
                    </div>
                </div>

                <!-- Step 2: Doctor Selection -->
                <div class="booking-step" id="step-2">
                    <div class="row mb-4">
                        <div class="col-12">
                            <h3 class="mb-4">Selecciona el Especialista</h3>
                        </div>
                        <!-- Doctor 1 -->
                        <div class="col-md-4 mb-4">
                            <div class="doctor-card" data-doctor="dra-milenka">
                                <div class="doctor-image">
                                    <img src="../img/dr.mile1.jpg" alt="Dra. Milenka">
                                </div>
                                <div class="doctor-info">
                                    <h5>Dra. Milenka Llave</h5>
                                    <div class="doctor-speciality">Especialista en Ortodoncia</div>
                                    <div class="doctor-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <p class="text-muted mb-0">10 años de experiencia</p>
                                </div>
                            </div>
                        </div>

                        <!-- Doctor 2 -->
                        <div class="col-md-4 mb-4">
                            <div class="doctor-card" data-doctor="dr-juan">
                                <div class="doctor-image">
                                    <img src="../img/R.jpg" alt="Dr. Juan">
                                </div>
                                <div class="doctor-info">
                                    <h5>Dr. Juan Pérez</h5>
                                    <div class="doctor-speciality">Implantólogo</div>
                                    <div class="doctor-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <p class="text-muted mb-0">15 años de experiencia</p>
                                </div>
                            </div>
                        </div>

                        <!-- Doctor 3 -->
                        <div class="col-md-4 mb-4">
                            <div class="doctor-card" data-doctor="dra-ana">
                                <div class="doctor-image">
                                    <img src="../img/OIP.jpg" alt="Dra. Ana">
                                </div>
                                <div class="doctor-info">
                                    <h5>Dra. Ana Martínez</h5>
                                    <div class="doctor-speciality">Odontología Estética</div>
                                    <div class="doctor-rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <p class="text-muted mb-0">8 años de experiencia</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               

                <!-- Step 3: Date & Time Selection -->
                <div class="booking-step" id="step-3">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="calendar-wrapper">
                                <div id="booking-calendar"></div>
                                <div class="mt-4">
                                    <h5>Horarios Disponibles</h5>
                                    <div class="time-slots" id="time-slots">
                                        <!-- Se llenará dinámicamente -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="booking-summary" id="booking-summary">
                                <!-- Se actualizará dinámicamente -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Personal Information -->
                <div class="booking-step" id="step-4">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-section">
                                <form id="booking-form" class="needs-validation" novalidate>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Nombre completo *</label>
                                            <input type="text" class="form-control" name="name" required>
                                            <div class="invalid-feedback">
                                                Por favor ingresa tu nombre
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Email *</label>
                                            <input type="email" class="form-control" name="email" required>
                                            <div class="invalid-feedback">
                                                Por favor ingresa un email válido
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Teléfono *</label>
                                            <input type="tel" class="form-control" name="phone" required>
                                            <div class="invalid-feedback">
                                                Por favor ingresa tu número de teléfono
                                            </div>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">Fecha de nacimiento</label>
                                            <input type="date" class="form-control" name="birthdate">
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label class="form-label">¿Primera visita?</label>
                                            <div class="d-flex gap-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="firstVisit" value="yes" id="visitYes">
                                                    <label class="form-check-label" for="visitYes">Sí</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="firstVisit" value="no" id="visitNo">
                                                    <label class="form-check-label" for="visitNo">No</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label class="form-label">Motivo de la consulta *</label>
                                            <textarea class="form-control" name="reason" rows="3" required></textarea>
                                            <div class="invalid-feedback">
                                                Por favor describe el motivo de tu consulta
                                            </div>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <label class="form-label">Condiciones médicas o alergias</label>
                                            <textarea class="form-control" name="medicalConditions" rows="2"></textarea>
                                        </div>
                                        <div class="col-12 mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="terms" id="terms" required>
                                                <label class="form-check-label" for="terms">
                                                    Acepto los términos y condiciones y la política de privacidad
                                                </label>
                                                <div class="invalid-feedback">
                                                    Debes aceptar los términos y condiciones
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card shadow-sm">
                                <div class="card-body">
                                    <h5 class="card-title">Información Importante</h5>
                                    <ul class="list-unstyled mb-4">
                                        <li class="mb-2">
                                            <i class="fas fa-clock text-primary me-2"></i>
                                            Llegar 10 minutos antes de tu cita
                                        </li>
                                        <li class="mb-2">
                                            <i class="fas fa-id-card text-primary me-2"></i>
                                            Traer identificación válida
                                        </li>
                                        <li class="mb-2">
                                            <i class="fas fa-file-medical text-primary me-2"></i>
                                            Traer historial médico si dispone
                                        </li>
                                        <li class="mb-2">
                                            <i class="fas fa-pills text-primary me-2"></i>
                                            Informar sobre medicamentos actuales
                                        </li>
                                    </ul>

                                    <div class="alert alert-info">
                                        <h6 class="alert-heading">
                                            <i class="fas fa-info-circle me-2"></i>
                                            Política de Cancelación
                                        </h6>
                                        <p class="small mb-0">
                                            Las cancelaciones deben realizarse con al menos 24 horas de anticipación.
                                            Cancelaciones tardías pueden estar sujetas a cargo.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            

            <!-- Navigation Buttons -->
            <div class="row mt-4">
                <div class="col-12 d-flex justify-content-between">
                    <button class="btn btn-outline-primary px-4" id="prevStep" style="display: none;">
                        <i class="fas fa-arrow-left me-2"></i>
                        Anterior
                    </button>
                    <button class="btn btn-primary px-4" id="nextStep">
                        Siguiente
                        <i class="fas fa-arrow-right ms-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Confirmation Modal -->
    <div class="modal fade" id="confirmationModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <!-- El contenido se generará dinámicamente -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="position-fixed top-0 start-0 w-100 h-100 d-none" 
         style="background: rgba(255,255,255,0.8); z-index: 9999;">
        <div class="position-absolute top-50 start-50 translate-middle text-center">
            <div class="spinner-border text-primary mb-2" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            <div class="fw-medium text-primary">Procesando tu reserva...</div>
        </div>
    </div>

    <footer class="footer py-5 bg-dark text-white">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <a class="d-inline-flex align-items-center mb-4" href="index.html">
                        <img src="https://th.bing.com/th/id/OIP.5z8L-c6VPSfaxywxoQx1wAHaHa?rs=1&pid=ImgDetMain" alt="Logo" class="rounded-circle" width="50">
                        <span class="ms-3 text-white h4 mb-0">Clínica Dental</span>
                    </a>
                    <p class="text-white-50 mb-4">
                        Dedicados a brindarte la mejor atención dental con tecnología de vanguardia y un equipo de profesionales altamente calificados.
                    </p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>

                <div class="col-lg-2">
                    <h5 class="text-white mb-4">Enlaces Rápidos</h5>
                    <ul class="footer-links">
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="#servicios">Servicios</a></li>
                        <li><a href="#nosotros">Nosotros</a></li>
                        <li><a href="#testimonios">Testimonios</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>

                <div class="col-lg-3">
                    <h5 class="text-white mb-4">Servicios</h5>
                    <ul class="footer-links">
                        <li><a href="#">Blanqueamiento Dental</a></li>
                        <li><a href="#">Ortodoncia</a></li>
                        <li><a href="#">Implantes Dentales</a></li>
                        <li><a href="#">Odontología General</a></li>
                        <li><a href="#">Odontopediatría</a></li>
                    </ul>
                </div>

                <div class="col-lg-3">
                    <h5 class="text-white mb-4">Horario de Atención</h5>
                    <ul class="footer-links">
                        <li>Lunes - Viernes: 9:00 - 20:00</li>
                        <li>Sábados: 9:00 - 14:00</li>
                        <li>Domingos: Cerrado</li>
                    </ul>
                    <a href="reserva.html" class="btn btn-primary mt-3">
                        <i class="fas fa-calendar-alt me-2"></i>
                        Agendar Cita
                    </a>
                </div>
            </div>

            <hr class="my-5 border-white-50">

            <div class="row align-items-center">
                <div class="col-md-6 text-center text-md-start text-white-50">
                    <p class="mb-0">© 2024 Clínica Dental. Todos los derechos reservados.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">
                            <a href="#" class="text-white-50">Términos y Condiciones</a>
                        </li>
                        <li class="list-inline-item ms-3">
                            <a href="#" class="text-white-50">Política de Privacidad</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row mb-5">
                <div class="col-lg-6">
                    <h4 class="text-white mb-4">Encuéntranos</h4>
                    <p class="text-white-50">Visítanos en nuestra clínica dental ubicada en el centro de la ciudad. Contamos con estacionamiento privado para nuestros pacientes.</p>
                    <div class="contact-info mt-4">
                        <p class="text-white-50 mb-2">
                            <i class="fas fa-map-marker-alt text-primary me-2"></i>
                            Av. Principal 123, Ciudad
                        </p>
                        <p class="text-white-50 mb-2">
                            <i class="fas fa-phone text-primary me-2"></i>
                            +1 234 567 890
                        </p>
                        <p class="text-white-50">
                            <i class="fas fa-envelope text-primary me-2"></i>
                            info@clinicadental.com
                        </p>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="map-container">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3825.3675495924765!2d-68.13249772387149!3d-16.49983508481894!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x915f206857542e87%3A0x53c4dcc85e589696!2sUniversidad%20Cat%C3%B3lica%20Boliviana%20San%20Pablo!5e0!3m2!1ses!2sbo!4v1701858738978!5m2!1ses!2sbo"
                            width="100%" 
                            height="300" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            </div>
        </div>
    </footer>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@uvarov.frontend/vanilla-calendar/build/vanilla-calendar.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

<script>
    // Al inicio del script en reserva.html
function getReservedTimes() {
    return JSON.parse(localStorage.getItem('reservedTimes')) || {};
}

function saveReservedTime(date, time) {
    const reservedTimes = getReservedTimes();
    if (!reservedTimes[date]) {
        reservedTimes[date] = [];
    }
    reservedTimes[date].push(time);
    localStorage.setItem('reservedTimes', JSON.stringify(reservedTimes));
}


    // Inicialización de AOS
    AOS.init({
        duration: 800,
        once: true
    });

    // Variables globales
    let currentStep = 1;
    const bookingData = {
        service: null,
        doctor: null,
        date: null,
        time: null,
        personalInfo: {}
    };

    // Inicialización del calendario
    const calendar = new VanillaCalendar('#booking-calendar', {
        settings: {
            lang: 'es',
            range: {
                min: new Date(),
                max: new Date(new Date().setMonth(new Date().getMonth() + 2))
            },
            selection: {
                day: 'single'
            }
        },
        actions: {
            clickDay(e, dates) {
                const selectedDate = dates[0];
                bookingData.date = selectedDate;
                generateTimeSlots(selectedDate);
                updateSummary();
            }
        }
    });

    // Inicializar calendario
    calendar.init();

    // Generar horarios disponibles
    function generateTimeSlots(date) {
        const timeSlots = document.getElementById('time-slots');
        timeSlots.innerHTML = '';
        
        // Formatear la fecha para usar como clave
        const dateKey = new Date(date).toISOString().split('T')[0];
        
        // Obtener horarios reservados para esta fecha
        const reservedTimes = getReservedTimes();
        const reservedForDate = reservedTimes[dateKey] || [];
        
        const availableSlots = [
            '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',
            '12:00', '15:00', '15:30', '16:00', '16:30', '17:00'
        ];
    
        availableSlots.forEach(time => {
            const slot = document.createElement('button');
            slot.className = 'time-slot';
            
            // Verificar si el horario está reservado
            if (reservedForDate.includes(time)) {
                slot.classList.add('reserved');
                slot.disabled = true;
            } else {
                slot.addEventListener('click', () => selectTimeSlot(time, slot));
            }
            
            slot.textContent = time;
            slot.type = 'button';
            timeSlots.appendChild(slot);
        });
    }

    // Seleccionar horario
    function selectTimeSlot(time, element) {
        document.querySelectorAll('.time-slot').forEach(slot => 
            slot.classList.remove('selected'));
        element.classList.add('selected');
        bookingData.time = time;
        updateSummary();
    }

    // Actualizar resumen de reserva
    function updateSummary() {
        const summary = document.getElementById('booking-summary');
        summary.innerHTML = `
            <h4 class="mb-4">Resumen de Reserva</h4>
            ${bookingData.service ? `
                <div class="summary-item">
                    <span>Servicio:</span>
                    <strong>${bookingData.service.name}</strong>
                </div>
            ` : ''}
            ${bookingData.doctor ? `
                <div class="summary-item">
                    <span>Especialista:</span>
                    <strong>${bookingData.doctor.name}</strong>
                </div>
            ` : ''}
            ${bookingData.date ? `
                <div class="summary-item">
                    <span>Fecha:</span>
                    <strong>${formatDate(bookingData.date)}</strong>
                </div>
            ` : ''}
            ${bookingData.time ? `
                <div class="summary-item">
                    <span>Hora:</span>
                    <strong>${bookingData.time}</strong>
                </div>
            ` : ''}
            ${bookingData.service ? `
                <div class="summary-total">
                    <div class="d-flex justify-content-between align-items-center">
                        <span>Total:</span>
                        <h3 class="text-primary mb-0">$${bookingData.service.price}</h3>
                    </div>
                </div>
            ` : ''}
        `;
    }

    // Formatear fecha
    function formatDate(date) {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(date).toLocaleDateString('es-ES', options);
    }

    // Validar cada paso
    function validateStep(step) {
        switch(step) {
            case 1:
                if (!bookingData.service) {
                    showToast('Por favor selecciona un servicio');
                    return false;
                }
                return true;
            case 2:
                if (!bookingData.doctor) {
                    showToast('Por favor selecciona un especialista');
                    return false;
                }
                return true;
            case 3:
                if (!bookingData.date || !bookingData.time) {
                    showToast('Por favor selecciona fecha y hora');
                    return false;
                }
                return true;
            case 4:
                return validateForm();
        }
    }

    // Validar formulario
    function validateForm() {
        const form = document.getElementById('booking-form');
        if (!form.checkValidity()) {
            form.classList.add('was-validated');
            showToast('Por favor completa todos los campos requeridos');
            return false;
        }

        const formData = new FormData(form);
        const data = Object.fromEntries(formData);

        if (!validateEmail(data.email)) {
            showToast('Por favor ingresa un email válido');
            return false;
        }

        bookingData.personalInfo = data;
        return true;
    }

    // Validar email
    function validateEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    // Mostrar toast de notificación
    function showToast(message, type = 'error') {
        Toastify({
            text: message,
            duration: 3000,
            gravity: "top",
            position: 'right',
            backgroundColor: type === 'error' ? '#E74C3C' : '#2ECC71',
            stopOnFocus: true
        }).showToast();
    }

    // Mostrar paso específico
    function showStep(step) {
        document.querySelectorAll('.booking-step').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.step').forEach(el => el.classList.remove('active', 'completed'));
        
        document.getElementById(`step-${step}`).classList.add('active');
        
        // Actualizar progress steps
        for (let i = 1; i <= 4; i++) {
            const stepEl = document.querySelector(`.step[data-step="${i}"]`);
            if (i < step) {
                stepEl.classList.add('completed');
            } else if (i === step) {
                stepEl.classList.add('active');
            }
        }

        // Mostrar/ocultar botones de navegación
        document.getElementById('prevStep').style.display = step > 1 ? 'block' : 'none';
        document.getElementById('nextStep').innerHTML = step === 4 ? 
            'Confirmar Reserva <i class="fas fa-check ms-2"></i>' : 
            'Siguiente <i class="fas fa-arrow-right ms-2"></i>';
    }

    // Navegación entre pasos
    document.getElementById('nextStep').addEventListener('click', () => {
        if (validateStep(currentStep)) {
            if (currentStep < 4) {
                currentStep++;
                showStep(currentStep);
            } else {
                confirmBooking();
            }
        }
    });

    document.getElementById('prevStep').addEventListener('click', () => {
        if (currentStep > 1) {
            currentStep--;
            showStep(currentStep);
        }
    });

    // Event listeners para selección de servicios
    document.querySelectorAll('.service-card').forEach(card => {
        card.addEventListener('click', function() {
            document.querySelectorAll('.service-card').forEach(c => 
                c.classList.remove('selected'));
            this.classList.add('selected');
            bookingData.service = {
                name: this.querySelector('h5').textContent,
                price: this.dataset.price
            };
            updateSummary();
        });
    });

    // Event listeners para selección de doctores
    document.querySelectorAll('.doctor-card').forEach(card => {
        card.addEventListener('click', function() {
            document.querySelectorAll('.doctor-card').forEach(c => 
                c.classList.remove('selected'));
            this.classList.add('selected');
            bookingData.doctor = {
                name: this.querySelector('h5').textContent,
                specialty: this.querySelector('.doctor-speciality').textContent
            };
            updateSummary();
        });
    });

    // Confirmar reserva
    async function confirmBooking() {
        try {
            document.getElementById('loadingOverlay').classList.remove('d-none');
            
            // Guardar la hora reservada
            const dateKey = new Date(bookingData.date).toISOString().split('T')[0];
            saveReservedTime(dateKey, bookingData.time);
            
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            document.getElementById('loadingOverlay').classList.add('d-none');
            showConfirmationModal();
        } catch (error) {
            document.getElementById('loadingOverlay').classList.add('d-none');
            showToast('Error al procesar la reserva. Por favor intenta nuevamente.', 'error');
        }
    }

    // Mostrar modal de confirmación
    function showConfirmationModal() {
        const modalContent = `
            <div class="modal-header border-0">
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center p-5">
                <div class="mb-4">
                    <i class="fas fa-check-circle text-success" style="font-size: 4rem;"></i>
                </div>
                <h4 class="mb-4">¡Reserva Confirmada!</h4>
                <p class="mb-4">Tu cita ha sido agendada correctamente.</p>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    Te hemos enviado un email con los detalles de tu reserva.
                </div>
                <div class="booking-details mt-4 text-start">
                    <h6 class="mb-3">Detalles de la Reserva:</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><strong>Servicio:</strong> ${bookingData.service.name}</li>
                        <li class="mb-2"><strong>Doctor:</strong> ${bookingData.doctor.name}</li>
                        <li class="mb-2"><strong>Fecha:</strong> ${formatDate(bookingData.date)}</li>
                        <li class="mb-2"><strong>Hora:</strong> ${bookingData.time}</li>
                        <li class="mb-2"><strong>Total:</strong> $${bookingData.service.price}</li>
                    </ul>
                </div>
                <div class="d-grid gap-2 mt-4">
                    <a type="button" class="btn btn-primary" onclick="window.location.href='/'">
                        <i class="fas fa-home me-2"></i>
                        Volver al Inicio
                    </a>
                    <button type="button" class="btn btn-outline-primary" onclick="window.print()">
                        <i class="fas fa-print me-2"></i>
                        Imprimir Comprobante
                    </button>
                </div>
            </div>
        `;

        document.querySelector('.modal-content').innerHTML = modalContent;
        const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
        modal.show();
    }

    // Agregar esto dentro del script existente en reserva.html, justo después de las variables globales
document.addEventListener('DOMContentLoaded', function() {
    // Obtener el servicio de la URL
    const urlParams = new URLSearchParams(window.location.search);
    const serviceParam = urlParams.get('service');
    
    if (serviceParam) {
        // Encontrar y seleccionar automáticamente la tarjeta del servicio
        const serviceCard = document.querySelector(`.service-card[data-service="${serviceParam}"]`);
        if (serviceCard) {
            // Simular clic en la tarjeta
            serviceCard.click();
            // Hacer scroll hasta la sección de reserva
            document.getElementById('booking-steps').scrollIntoView({ behavior: 'smooth' });
        }
    }
});

    // Inicialización
    showStep(1);
    updateSummary();
</script>
</body>
</html>

